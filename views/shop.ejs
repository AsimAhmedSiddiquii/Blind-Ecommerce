<%- include("./common/header") %>
    <!-- Header End -->
    <% if (recordChangeIndicater> 1) { %>
        <script>
            var getRecordIndicator = '<%= recordChangeIndicater %>';
        </script>
        <% } else if(recordChangeIndicater==1){%>
            <script>
                getRecordIndicator = '<%= recordChangeIndicater %>';
            </script>
            <% } %>
                <!--script on client-->
                <script>
                    if (sessionStorage.getItem("mode") == "Blind Mode") {
                        var isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
                        if (!isChrome) {
                            alert('Voice input available');
                        }

                        let speech = new SpeechSynthesisUtterance();
                        speech.lang = "en-US";
                        speech.volume = 1;
                        speech.rate = 1;
                        speech.pitch = 1;

                        function onLoad() {
                            var SpeechRecognition = SpeechRecognition || webkitSpeechRecognition;
                            var recognition = new SpeechRecognition();

                            speech.text = 'This is shopping page, If you want to buy any product please follow the instruction. If you want to start shopping, you need to say, start, continue or begin';
                            window.speechSynthesis.speak(speech);
                            speech.onend = function (event) {
                                recognition.start();

                                recognition.onstart = function () {
                                    
                                };

                                recognition.onresult = function (event) {
                                    var transcript = event.results[0][0].transcript;
                                    console.log(transcript + '1');
                                    
                                    recognition.stop();
                                    if (transcript.includes('start') || transcript.includes('begin') || transcript.includes('continue')) {
                                        askForProducts();
                                    } else if (transcript.includes('cart') || transcript.includes('kat')) {
                                        window.location.href = '/shopping-cart'
                                    } else if (transcript.includes('orders') || transcript.includes('my orders')) {
                                        window.location.href = '/my-orders'
                                    }
                                };
                            };
                        }

                        function askForProducts() {
                            var records = <%- JSON.stringify(records) %>;
                            var SpeechRecognition = SpeechRecognition || webkitSpeechRecognition;
                            var recognition = new SpeechRecognition();

                            if (records.length != 0) {
                                speech.text = 'There are following products available, to add the product in cart tell the order of the product, like first, second, or third';
                                if (records.length >= 1) {
                                    speech.text += ', First product is ' + records[0].product_name + ", price is " + records[0].product_price
                                }
                                if (records.length >= 2) {
                                    speech.text += ', Second product is ' + records[1].product_name + ", price is " + records[1].product_price
                                }
                                if (records.length >= 3) {
                                    speech.text += ', Third product is ' + records[2].product_name + ", price is " + records[2].product_price
                                }
                                window.speechSynthesis.speak(speech);
                                speech.onend = function (event) {
                                    recognition.start();

                                    recognition.onstart = function () {
                                       
                                    };

                                    recognition.onresult = function (event) {
                                        var transcript = event.results[0][0].transcript;
                                        console.log(transcript + '1');
                                        recognition.stop();
                                            var link = '/shopping-cart/addProduct/';
                                        if (transcript.includes('first') || transcript.includes('fast') || transcript.includes('1st')) {
                                            link += records[0].product_name;
                                            window.location.href = link
                                        } else if (transcript.includes('second') || transcript.includes('second') || transcript.includes('2nd')) {
                                            link += records[1].product_name;
                                            window.location.href = link
                                        } else if (transcript.includes('third') || transcript.includes('third') || transcript.includes('3rd')) {
                                            link += records[2].product_name;
                                            window.location.href = link
                                        }
                                    };
                                };
                            }
                        }
                    }
                </script>

                <body id="bodyLoader" onload="onLoad()">
                    <!-- Page Preloder -->
                    <div id="preloder">
                        <div class="loader"></div>
                    </div>

                    <!-- Header Section Begin -->
                    <header class="header-section">
                        <%- include('./common/headerBody') %>

                            <div class="nav-item">
                                <div class="container">
                                    <nav class="nav-menu mobile-menu">
                                        <ul>
                                            <li><a href="/home">Home</a></li>
                                            <li class="active"><a href="/shop">Shop</a></li>
                                            <li><a href="#">Collection</a>
                                                <ul class="dropdown">
                                                    <li><a href="/shop/ladies">Ladies</a></li>
                                                    <li><a href="/shop/gents">Gents</a></li>
                                                    <li><a href="/shop/kids">Kid's</a></li>
                                                </ul>
                                            </li>
                                            <li><a href="#">My Account</a>
                                                <ul class="dropdown">
                                                    <li><a href="/shopping-cart">Shopping Cart</a></li>
                                                    <li><a href="/my-orders">My Orders</a></li>
                                                    <li><a href="/check-out">Checkout</a></li>
                                                </ul>
                                            </li>
                                            <li><a href="/contact">Contact</a></li>
                                        </ul>
                                    </nav>
                                    <div id="mobile-menu-wrap"></div>
                                </div>
                            </div>
                    </header>
                    <!-- Header End -->
                    <!-- Breadcrumb Section Begin -->
                    <div class="breacrumb-section">
                        <div class="container">
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="breadcrumb-text">
                                        <a href="/home"><i class="fa fa-home"></i> Home</a>
                                        <a href="/shop">Shop</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <section class="product-shop spad">
                        <div class="container">
                            <div class="row">
                                <form method="POST" action="/shop" id="searchData" role="form">

                                    <div class="col-lg-3 col-md-6 col-sm-8 order-2 order-lg-1 produts-sidebar-filter">
                                        <div class="filter-widget">
                                            <input type="hidden" id="in" placeholder="common Field">
                                            <input type="hidden" name="pos" placeholder="position taking field">
                                            <input type="hidden" name="category" id="category">

                                            <h4 class="fw-title">Categories</h4>
                                            <div class="fw-brand-check">
                                                <div class="bc-item">
                                                    <input type="hidden" name="brand" id="brand">

                                                    <label for="Ladies">Ladies
                                                        <input type="checkbox" id="Ladies" value="ladies"
                                                            name="category">
                                                        <span class="checkmark"></span>
                                                    </label>
                                                </div>

                                                <div class="bc-item">
                                                    <label for="Gents">Gents
                                                        <input type="checkbox" id="Gents" value="gents" name="category">
                                                        <span class="checkmark"></span>
                                                    </label>
                                                </div>

                                                <div class="bc-item">
                                                    <label for="Kids">Kids
                                                        <input type="checkbox" id="Kids" value="kids" name="category">
                                                        <span class="checkmark"></span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="filter-widget">
                                            <!--Hidden feilds are -->
                                            <input type="hidden" name="color" id="color">
                                            <h4 class="fw-title">Color</h4>
                                            <div class="fw-brand-check">
                                                <div class="bc-item">
                                                    <input type="hidden" name="brand" id="brand">

                                                    <label for="Black">Black
                                                        <input type="checkbox" id="Black" name="color" value="black">
                                                        <span class="checkmark"></span>
                                                    </label>
                                                </div>

                                                <div class="bc-item">
                                                    <label for="Green">Green
                                                        <input type="checkbox" id="Green" name="color" value="green">
                                                        <span class="checkmark"></span>
                                                    </label>
                                                </div>

                                                <div class="bc-item">
                                                    <label for="Red">Red
                                                        <input type="checkbox" id="Red" value="Red" name="color">
                                                        <span class="checkmark"></span>
                                                    </label>
                                                </div>
                                                <div class="bc-item">
                                                    <label for="Grey">Grey
                                                        <input type="checkbox" id="Grey" name="color" value="grey">
                                                        <span class="checkmark"></span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="filter-widget">
                                            <h4 class="fw-title">Brand</h4>
                                            <div class="fw-brand-check">
                                                <div class="bc-item">
                                                    <input type="hidden" name="brand" id="brand">

                                                    <label for="bc-diesel">Diesel
                                                        <input type="checkbox" id="bc-diesel" name="brandCheck"
                                                            value="Diesel">
                                                        <span class="checkmark"></span>
                                                    </label>
                                                </div>

                                                <div class="bc-item">
                                                    <label for="bc-polo">Polo
                                                        <input type="checkbox" id="bc-polo" name="brandCheck"
                                                            value="Polo">
                                                        <span class="checkmark"></span>
                                                    </label>
                                                </div>

                                                <div class="bc-item">
                                                    <label for="bc-zara">Zara
                                                        <input type="checkbox" id="bc-zara" name="brandCheck"
                                                            value="Zara">
                                                        <span class="checkmark"></span>
                                                    </label>
                                                </div>

                                                <div class="bc-item">
                                                    <label for="bc-others">Others
                                                        <input type="checkbox" id="bc-others" name="brandCheck"
                                                            value="Others">
                                                        <span class="checkmark"></span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="filter-widget">
                                            <h4 class="fw-title">Price</h4>
                                            <div class="filter-range-wrap">
                                                <div class="range-slider">
                                                    <input type="hidden" name="price" id="price">
                                                    <div class="price-input">
                                                        <input type="text" id="minamount" name="minPrice" id="minPrice">
                                                        <input type="text" id="maxamount" name="maxPrice" id="maxPrice">
                                                    </div>
                                                </div>
                                                <div class="price-range ui-slider ui-corner-all ui-slider-horizontal ui-widget ui-widget-content"
                                                    data-min="300" data-max="3000">
                                                    <div class="ui-slider-range ui-corner-all ui-widget-header"></div>
                                                    <span tabindex="0"
                                                        class="ui-slider-handle ui-corner-all ui-state-default"></span>
                                                    <span tabindex="0"
                                                        class="ui-slider-handle ui-corner-all ui-state-default"></span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="filter-widget">
                                            <input type="hidden" name="size" id="size">
                                            <h4 class="fw-title mt-3">Size</h4>
                                            <div class="fw-size-choose">
                                                <div class="sc-item">
                                                    <input type="radio" id="s-size" value="S" name="product_size">
                                                    <label for="s-size">S</label>
                                                </div>
                                                <div class="sc-item">
                                                    <input type="radio" id="m-size" value="M" name="product_size">
                                                    <label for="m-size">M</label>
                                                </div>
                                                <div class="sc-item">
                                                    <input type="radio" id="l-size" value="L" name="product_size">
                                                    <label for="l-size">L</label>
                                                </div>
                                                <div class="sc-item">
                                                    <input type="radio" id="xs-size" value="XL" name="product_size">
                                                    <label for="xs-size">XL</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="filter-widget">
                                            <input type="hidden" name="tags" id="tags">
                                            <h4 class="fw-title">Tags</h4>
                                            <div class="fw-tag-choose">
                                                <div class="sc-item">
                                                    <input type="radio" id="Shoes" value="shoes" name="product_tags">
                                                    <label>Shoes</label>
                                                </div>
                                                <div class="sc-item">
                                                    <input type="radio" id="Jacket" value="jacket" name="product_tags">
                                                    <label>Jacket</label>
                                                </div>
                                                <div class="sc-item">
                                                    <input type="radio" id="Hat" value="hat" name="product_tags">
                                                    <label>Hat</label>
                                                </div>
                                                <div class="sc-item">
                                                    <input type="radio" id="Towel" value="Cloth" name="product_tags">
                                                    <label>Cloth</label>
                                                </div>
                                            </div>

                                        </div>
                                        <input type="submit" value="Filter" class="btn "
                                            style="font-size: 20px; width: 40%; background-color: #E7AB3C;">
                                    </div>

                                    <div class="col-lg-9 order-1 order-lg-2">
                                        <div class="product-show-option">
                                            <div class="row">
                                                <div class="col-lg-7 col-md-7">
                                                    <div class="select-option">
                                                    </div>
                                                </div>

                                                <div class="product-list">
                                                    <div class="row">
                                                        <% if (recordChangeIndicater> 1) { %>
                                                            <script>
                                                                var counter = 1;
                                                                say('There is ' + '<%= total-1 %>' + 'product display as per your requirement');
                                                            </script>
                                                            <% } %>
                                                                <% if(records.length> 0){
                                                                    counterName=1
                                                                    records.forEach(function(row){ %>

                                                                    <div class="modal fade"
                                                                        id="myModal<%= counterName %>">
                                                                        <div class="modal-dialog">

                                                                            <div class="modal-content">
                                                                                <div class="modal-header">
                                                                                    <h5 class="modal-title">Product
                                                                                        Details</h5>
                                                                                    <button type="button" class="close"
                                                                                        data-dismiss="modal">&times;</button>
                                                                                </div>
                                                                                <div class="modal-body">
                                                                                    <div class="row">
                                                                                        <div class="col-sm-6">
                                                                                            <img src="<%= row.product_image.toString().replace('public\\','\\') %>"
                                                                                                alt="" width="100%"
                                                                                                height="70%">
                                                                                        </div>
                                                                                        <div class="col-sm-6"
                                                                                            style="float: left;">
                                                                                            <b
                                                                                                style="font-size: 18px; color: #E7AB3C;">
                                                                                                <%= row.product_name %>
                                                                                            </b><br>
                                                                                            <b
                                                                                                style="font-size: 20px; color: #E7AB3C;">â‚¹
                                                                                                <%= row.product_price %>
                                                                                            </b><br>
                                                                                            <hr>
                                                                                            Brand: <%= row.product_brand
                                                                                                %><br>
                                                                                                Category: <%=
                                                                                                    row.product_category
                                                                                                    %><br>
                                                                                                    <br>
                                                                                                    <% if(row.product_description
                                                                                                        !="" ) { %>
                                                                                                        <p
                                                                                                            style="font-size: 14px; color: black; line-height: 20px;">
                                                                                                            Description:
                                                                                                            <%= row.product_description
                                                                                                                %>
                                                                                                        </p>
                                                                                                        <% } %>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="modal-footer">
                                                                                    <a onclick="showMsg()"
                                                                                        href="/shopping-cart/addProduct/<%= row.product_name %>"
                                                                                        class="btn"
                                                                                        style="font-size: 14px; float: left; width: 30%; border-radius: 15px; background-color: #E7AB3C;">Add
                                                                                        to cart</a>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <div class="col-lg-4 col-sm-6">
                                                                        <div class="product-item">
                                                                            <div class="pi-pic">
                                                                                <img src="<%= row.product_image.toString().replace('public\\','\\') %>"
                                                                                    alt="">
                                                                                <div class="sale pp-sale">Sale</div>
                                                                                <div class="icon">
                                                                                    <i class="icon_heart_alt"></i>
                                                                                </div>
                                                                                <ul>
                                                                                    <li class="quick-view"><a
                                                                                            data-toggle="modal"
                                                                                            data-target="#myModal<%= counterName %>"
                                                                                            style="cursor: pointer;">+
                                                                                            Quick
                                                                                            View</a></li>

                                                                                    <li class="w-icon"><a
                                                                                            onclick="showMsg()"
                                                                                            href="/shopping-cart/addProduct/<%= row.product_name %>"
                                                                                            class="btn"><i
                                                                                                class="fa fa-cart-plus fa-xl"></i></a>
                                                                                    </li>
                                                                                </ul>
                                                                            </div>
                                                                            <div class="pi-text">
                                                                                <div class="catagory-name">
                                                                                    <%= row.product_tags %>
                                                                                </div>
                                                                                <a data-toggle="modal"
                                                                                    data-target="#myModal<%= counterName %>"
                                                                                    style="cursor: pointer;">
                                                                                    <h5 name="p1">
                                                                                        <%= row.product_name %>
                                                                                    </h5>
                                                                                </a>
                                                                                <div class="product-price">
                                                                                    <%= row.product_price %>
                                                                                        <% var amnt=row.product_price %>
                                                                                            <span>
                                                                                                <%= amnt+385 %>
                                                                                            </span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>


                                                                    <% if (recordChangeIndicater> 1) { %>
                                                                        <input type="hidden" value="<%= row._id %>"
                                                                            name="name<%= counterName %>">
                                                                        <script>
                                                                            say('on ' + counter + ' position, the name of product is, ' + '<%= row.product_name %>' + ' and, price of product is, ' + '<%= row.product_price %>');
                                                                            counter++;
                                                                        </script>
                                                                        <% } %>
                                                                            <% counterName++ %>
                                                                                <% }) }%>
                                                                                    <% if (recordChangeIndicater> 1) {
                                                                                        %>
                                                                                        <script>
                                                                                            say('if you want to order, you need to say, position of product. if you dont want to order, you need to say, `cancel` ');
                                                                                            setInterval(switchRecognition, 9000, 'pos');
                                                                                            say('Your order has been placed!!!');
                                                                                        </script>
                                                                                        <% } %>
                                                    </div>
                                                </div>
                                </form>

                                <% if(pages> 0) { %>
                                    <ul class="pagination text-center pagination-lg justify-content-end ">
                                        <% if(current==1) {%>
                                            <li class="disabled"><a>First</a></li>
                                            <% } else{ %>
                                                <li><a href="/shop/pagination/1">First</a></li>
                                                <% } %>
                                                    <% var i=(Number(current)> 5 ? Number(current) - 4 : 1)
                                                        %>
                                                        <% if(i !==1){ %>
                                                            <li class="disabled"><a>...</a></li>
                                                            <% } %>
                                                                <% for(; i <=(Number(current) + 4) && i <=pages; i++){
                                                                    %>
                                                                    <% if(i==current){ %>
                                                                        <li class="active">
                                                                            <a>
                                                                                <%= i %>
                                                                            </a>
                                                                        </li>
                                                                        <% } else { %>
                                                                            <li>
                                                                                <a href="/shop/pagination/<%= i %>">
                                                                                    <%= i %>
                                                                                </a>
                                                                            </li>
                                                                            <% } %>
                                                                                <% if(i==Number(current) + 4 && i <
                                                                                    pages){%>
                                                                                    <li class="disabled">
                                                                                        <a>...</a>
                                                                                    </li>
                                                                                    <% } %>
                                                                                        <% } %>
                                                                                            <% if(current==pages){%>
                                                                                                <li class="disabled">
                                                                                                    <a>Last</a>
                                                                                                </li>
                                                                                                <% } else { %>
                                                                                                    <li><a
                                                                                                            href="/shop/pagination/<%= pages %>">Last</a>
                                                                                                    </li>
                                                                                                    <%} %>
                                    </ul>
                                    <% } %>
                            </div>
                    </section>

                    <script>
                        function showMsg() {
                            swal('Success', "Product added to cart successfully", 'success');
                        }
                    </script>

                    <%- include('./common/footer') %>